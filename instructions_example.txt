# ============================================
# ИНСТРУКЦИИ ДЛЯ LLM ПО ПАРСИНГУ ДОКУМЕНТА
# ============================================
#
# ФОРМАТ:
# [TASK: название_задачи]
# @OUTPUT_KEY: ключ_в_json
# @FORMAT: json
#
# Текст инструкции для LLM...
# Объясните что нужно найти и как представить результат
#
# ============================================

[TASK: extract_metadata]
@OUTPUT_KEY: metadata

Найди в начале документа следующие метаданные:
1. Номер документа - формат: ЦЦ-ЦЦЦЦ или ЦЦ- ЦЦЦЦ (например: 01-0530)
2. Дата - формат: ММ.ГГГГ (например: 04.2025)
3. Всех адресатов - строки начинаются с "Начальнику" (может быть несколько)

Верни результат в формате:
{
  "document_number": "01-0530",
  "date": "04.2025",
  "addressees": ["Начальнику ЭСПЦ", "Начальнику СПЦ-1", ...]
}

[TASK: extract_technical_params]
@OUTPUT_KEY: technical_params

Найди следующие технические параметры:
1. Марка стали - после текста "стали марки" (число, например: 6856)
2. Вариант - после текста "вариант" (число, например: 0)
3. Код ОЭМК - после текста "код ОЭМК" (может содержать буквы и цифры)
4. Код вида продукции - после текста "код вида продукции" (число)
5. Экспортное наименование - после текста "экспортное наименование"
6. Условный аналог - после текста "условный аналог"
7. Стандарт выплавки - текст между "стандарт выплавки" и следующим разделом

Верни результат в формате:
{
  "steel_grade": "6856",
  "variant": "0",
  "code_oemk": "dэ7",
  "production_code": "090116",
  "export_name": "42CrMoS4+H",
  "analog": "З8ХГМ",
  "melting_standard": "настоящее ДП/25"
}

[TASK: extract_table_1]
@OUTPUT_KEY: table_chemical_composition

Найди Таблицу 1 (Химический состав).
В таблице есть:
- Столбцы: химические элементы (С, Si, Mn, S, P, Cr, Ni, Cu, Al, Mo и др.)
- Строки с данными:
  * Рекомендуемые значения (маркер: "Рекоменд" или "рекомендуемый")
  * По аттестату/сертификату (маркер: "Аттестат" или "сертиф")
  * ЭСПЦ (маркер: "ЭСПЦ")

Для каждой строки извлеки числовые значения для всех столбцов.
Если значение отсутствует, используй "н.б." (не более).

Верни результат в формате:
{
  "table_number": "1",
  "columns": ["С", "Si", "Mn", "S", "P", "Cr", "Ni", "Cu", "Al", "Mo"],
  "rows": {
    "recommended": ["0.42", "0.25", "0.85", "0.028", ...],
    "certificate": ["0.40", "0.15", "0.80", "0.020", ...],
    "espz": ["0.45", "0.30", "0.90", "0.035", ...]
  }
}

[TASK: extract_production_sections]
@OUTPUT_KEY: production_sections

Найди разделы документа о производстве:
1. Раздел 1 - обычно начинается с "1." или "ПРОИЗВОДСТВО НЛЗ"
2. Раздел 2 - обычно начинается с "2." или "ПРОИЗВОДСТВО ПРОКАТА"
3. Раздел 3 - обычно начинается с "3." или "КОНТРОЛЬ"

Для каждого раздела:
- Извлеки заголовок
- Извлеки краткое содержание (первые 2-3 предложения или ключевые пункты)
- Если есть подразделы (1.1, 1.2 и т.д.), перечисли их

Верни результат в формате:
{
  "section_1": {
    "title": "ПРОИЗВОДСТВО НЛЗ",
    "summary": "Выплавку производить в соответствии с...",
    "subsections": ["1.1", "1.2", "1.3", ...]
  },
  "section_2": {
    "title": "ПРОИЗВОДСТВО ПРОКАТА",
    "summary": "...",
    "subsections": [...]
  }
}

[TASK: extract_notes]
@OUTPUT_KEY: notes

Найди примечания и важные замечания в документе:
1. Текст после "Примечания:"
2. Текст после "это" (обычно пояснение к таблице)
3. Любые другие важные примечания или пояснения

Верни результат в формате:
{
  "note_1": "содержание элементов перед отдачей...",
  "note_2": "...",
  "general_notes": "Примечания: ..."
}

[TASK: extract_standards]
@OUTPUT_KEY: standards_and_references

Найди все упоминания стандартов, нормативных документов и технических условий:
- ТИ (технологические инструкции) - например: ТИ П.03-94
- ГОСТ
- СТП
- ISO
- EN
- Другие стандарты

Для каждого стандарта укажи контекст (для чего он применяется).

Верни результат в формате:
{
  "standards": [
    {
      "type": "ТИ",
      "number": "П.03-94",
      "context": "нагрев НЛЗ"
    },
    {
      "type": "СТП",
      "number": "025",
      "context": "аттестация плавок"
    }
  ]
}



